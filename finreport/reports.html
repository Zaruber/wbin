<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Finreport ‚Äî –Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</title>
  <link rel="stylesheet" href="styles/reports.css" />
  <script defer src="scripts/preload.js"></script>
  <script defer src="scripts/jszip.min.js"></script>
  <script defer src="scripts/xlsx.full.min.js"></script>
  <script defer src="scripts/reports.js"></script>
</head>

<body>
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-text">WBin</div>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-item active" data-target="view-reports">
          <span class="nav-icon">üìä</span>
          <span class="nav-label">–§–∏–Ω.–æ—Ç—á–µ—Ç—ã</span>
        </button>
        <button class="nav-item" data-target="view-storage">
          <span class="nav-icon">üì¶</span>
          <span class="nav-label">–ü–ª–∞—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</span>
        </button>
      </nav>
    </aside>
    <div class="app-content">
      <header class="header">
        <div class="promo-grid">
          <div class="promo-card">
            <a href="https://zaruber.github.io/zaruberpage/" target="_blank" rel="noopener noreferrer"
              class="promo-link-block">
              <img src="pngwing.com.png" alt="Cat" class="promo-avatar">
              <span class="promo-content">
                <span class="promo-title">
                  <span>–í–æ—Ç —Å—é–¥–∞ –∫–ª–∏–∫–Ω–µ—à—å</span>
                  <span class="promo-arrow">‚Üó</span>
                </span>
                <span class="promo-desc">–æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–∞–π—Ç —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤</span>
              </span>
            </a>
          </div>
          <div class="promo-card">
            <a href="https://t.me/+3g9fjC4OTn03MWYx" target="_blank" rel="noopener noreferrer" class="promo-link-block">
              <img src="Telegram_logo.svg" alt="Telegram" class="promo-avatar">
              <span class="promo-content">
                <span class="promo-title">
                  <span>–í—Å—Ç—É–ø–∏—Ç—å –≤ —á–∞—Ç</span>
                  <span class="promo-arrow">‚Üó</span>
                </span>
                <span class="promo-desc">–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ Finreport</span>
              </span>
            </a>
          </div>
          <div></div>
        </div>
        <div class="hdr-title-wrapper">
          <div class="hdr-title">Finreport</div>
          <div class="hdr-subtitle">–£–¥–æ–±–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã</div>
        </div>
        <div class="hdr-actions">
        </div>
      </header>
      <main class="main">

        <div id="view-reports" class="view-section active">
          <section class="bulk-actions">
            <div class="sel-info-block">
              <span style="font-weight: 600; color: #8a8a8e;">–í—ã–±—Ä–∞–Ω–æ:</span>
              <span id="selCount" class="sel-count-badge">0</span>
            </div>
            <div class="sel-summary">
              <div class="summary-card" data-tooltip-key="sales">
                <span class="summary-label">–ü—Ä–æ–¥–∞–∂–∞</span>
                <span id="sumSales" class="summary-value">0,00</span>
              </div>
              <div class="summary-card" data-tooltip-key="transfer">
                <span class="summary-label" style="color: #34c759;">–ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é</span>
                <span id="sumToTransfer" class="summary-value" style="color: #34c759;">0,00</span>
              </div>
              <div class="summary-card" data-tooltip-key="pay">
                <span class="summary-label" style="color: #0a84ff;">–ö –æ–ø–ª–∞—Ç–µ</span>
                <span id="sumToPay" class="summary-value" style="color: #0a84ff;">0,00</span>
              </div>
              <div class="summary-card" data-tooltip-key="logistics">
                <span class="summary-label">–õ–æ–≥–∏—Å—Ç–∏–∫–∞</span>
                <span id="sumLogistics" class="summary-value">0,00</span>
              </div>
              <div class="summary-card" data-tooltip-key="storage">
                <span class="summary-label">–•—Ä–∞–Ω–µ–Ω–∏–µ</span>
                <span id="sumStorage" class="summary-value">0,00</span>
              </div>
              <div class="summary-card" data-tooltip-key="penalties">
                <span class="summary-label" style="color: #ff3b30;">–®—Ç—Ä–∞—Ñ—ã</span>
                <span id="sumPenalties" class="summary-value" style="color: #ff3b30;">0,00</span>
              </div>
            </div>
            <div class="sel-actions">
              <div class="btn-group">
                <button id="reload" class="btn" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫">‚Üª</button>
                <button id="selectAllOnPage" class="btn">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                <button id="clearSelection" class="btn">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
              </div>
              <div class="vr-separator"></div>
              <div class="btn-group">
                <button id="downloadSelectedZip" class="btn primary">–°–∫–∞—á–∞—Ç—å ZIP</button>
                <button id="mergeSelected" class="btn primary" style="background-color: #8e44ad;">–û–±—ä–µ–¥–∏–Ω–∏—Ç—å</button>
              </div>
            </div>
          </section>
          <section>
            <div class="table-container">
              <table class="table" id="reportsTable">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="selectAllToggle" /></th>
                    <th>‚Ññ</th>
                    <th>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</th>
                    <th>–ü–µ—Ä–∏–æ–¥</th>
                    <th>–î–∞—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è</th>
                    <th>–ü—Ä–æ–¥–∞–∂–∞</th>
                    <th>–°–∫–∏–¥–∫–∞ %</th>
                    <th>–ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é</th>
                    <th>–õ–æ–≥–∏—Å—Ç–∏–∫–∞</th>
                    <th>–®—Ç—Ä–∞—Ñ –ª–æ–≥.</th>
                    <th>–®—Ç—Ä–∞—Ñ –æ–±–º–µ—Ä</th>
                    <th>–ü—Ä–æ—á–∏–µ —à—Ç—Ä–∞—Ñ—ã</th>
                    <th>–í—Å–µ–≥–æ —à—Ç—Ä–∞—Ñ–æ–≤</th>
                    <th>–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</th>
                    <th>WB –∫–æ–º–∏—Å—Å–∏—è</th>
                    <th>–•—Ä–∞–Ω–µ–Ω–∏–µ</th>
                    <th>–ü—Ä–∏–µ–º–∫–∞</th>
                    <th>–£–¥–µ—Ä–∂–∞–Ω–∏—è</th>
                    <th>–ö –æ–ø–ª–∞—Ç–µ</th>
                    <th>–í–∞–ª—é—Ç–∞</th>
                    <th>–¢–∏–ø</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                  </tr>
                </thead>
                <tbody id="tbody"></tbody>
              </table>
            </div>
            <div id="sentinel" style="height: 24px;"></div>
          </section>
        </div>

        <div id="view-storage" class="view-section" style="display: none;">
          <section class="bulk-actions" style="justify-content: flex-start; align-items: flex-end;">
            <div class="filter-group">
              <label for="storageDateFrom" class="filter-label">–°</label>
              <input type="date" id="storageDateFrom" class="form-control">
            </div>
            <div class="filter-group">
              <label for="storageDateTo" class="filter-label">–ü–æ</label>
              <input type="date" id="storageDateTo" class="form-control">
            </div>
            <button id="getStorageReport" class="btn primary">–ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç</button>
            <div class="vr-separator"></div>
            <div class="btn-group" id="storageActions" style="display: none;">
              <button id="groupByArticle" class="btn">–ü–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º</button>
              <div class="vr-separator"></div>
              <button id="downloadStorageXlsx" class="btn">–°–∫–∞—á–∞—Ç—å Excel</button>
              <button id="copyStorageTable" class="btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
          </section>
          <section>
            <div class="table-container" style="max-height: calc(100vh - 180px);">
              <div id="storageTableContainer" style="overflow: auto;">
                <div class="empty-state" id="storageEmptyState" style="height: 300px;">
                  <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç¬ª</p>
                </div>
              </div>
            </div>
          </section>
        </div>

      </main>
    </div>
  </div>
  <div id="reportModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞</h2>
        <button id="modalClose" class="modal-close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div id="modalTableContainer" style="overflow: auto; max-height: 70vh;"></div>
      </div>
      <div class="modal-footer">
        <button id="downloadModalReport" class="btn" style="margin-right: 10px;">–°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç</button>
        <button id="copyModalTable" class="btn primary">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
      </div>
    </div>
  </div>
  <div id="summaryTooltip" class="tooltip-popover" style="display: none;">
    <button class="tooltip-close">&times;</button>
    <div class="tooltip-content"></div>
    <div class="tooltip-footer">
      <button class="tooltip-prev" disabled>&larr;</button>
      <span class="tooltip-pagination"></span>
      <button class="tooltip-next">&rarr;</button>
    </div>
  </div>
</body>

</html>